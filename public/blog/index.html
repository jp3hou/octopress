
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Julia Chou</title>
  <meta name="author" content="Julia Chou">

  
  <meta name="description" content="The latter half of 2018 saw me turn my attention towards focusing on personal development and self-improvement, and as part of these efforts, I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jpchou.com/blog">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Julia Chou" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-132050270-1', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Julia Chou</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
<ul class="subscribe">
  <li><a href="https://github.com/jp3hou" rel="subscribe-github" title="@jp3hou on GitHub" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 50,0 C 22.385714,0 0,22.385714 0,50 0,77.614286 22.385714,100 50,100 77.614286,100 100,77.614286 100,50 100,22.385714 77.614286,0 50,0 z m 29.692858,79.692858 c -3.859184,3.859182 -8.351022,6.887754 -13.35,9.00306 -1.27041,0.536736 -2.560204,1.009184 -3.867348,1.415306 v -7.493878 c 0,-3.938774 -1.35102,-6.835714 -4.053062,-8.690816 1.692858,-0.163264 3.24694,-0.390816 4.663266,-0.683672 1.416326,-0.292858 2.913266,-0.716328 4.491838,-1.27041 1.57857,-0.55408 2.994896,-1.213264 4.247958,-1.97755 1.253062,-0.765306 2.458164,-1.758164 3.613266,-2.978572 1.155102,-1.220408 2.12449,-2.604082 2.905102,-4.15 0.780612,-1.545918 1.4,-3.40204 1.855102,-5.566326 0.455102,-2.164286 0.683674,-4.54898 0.683674,-7.153062 0,-5.045918 -1.643878,-9.341836 -4.931634,-12.890816 C 77.44796,33.35 77.285714,29.10204 75.463266,24.512244 l -1.22143,-0.145918 c -0.845918,-0.09796 -2.368366,0.260204 -4.565306,1.07449 -2.196938,0.814286 -4.663264,2.14796 -7.396938,4.004082 -3.87449,-1.07449 -7.893878,-1.611224 -12.061224,-1.611224 -4.19898,0 -8.203062,0.536734 -12.012246,1.611224 -1.72449,-1.17245 -3.361224,-2.139796 -4.907142,-2.905102 C 31.753062,25.77449 30.516326,25.254082 29.587756,24.97653 28.660204,24.7 27.79796,24.528572 27,24.463266 c -0.79796,-0.0653 -1.310204,-0.08062 -1.537756,-0.04898 -0.22755,0.03164 -0.390816,0.0653 -0.487754,0.09796 -1.82347,4.62245 -1.985714,8.87143 -0.487756,12.743878 -3.287754,3.54796 -4.931632,7.844898 -4.931632,12.890816 0,2.604082 0.227552,4.988776 0.683674,7.153062 0.456122,2.164286 1.07449,4.020408 1.855102,5.566326 0.780612,1.545918 1.75,2.929592 2.905102,4.15 1.155102,1.220408 2.360204,2.213266 3.613264,2.978572 1.253062,0.766326 2.669388,1.42449 4.24796,1.97755 1.578572,0.554082 3.07551,0.976532 4.491836,1.27041 1.416328,0.292856 2.970408,0.521428 4.663266,0.683672 -2.669388,1.82347 -4.004082,4.720408 -4.004082,8.690816 v 7.639796 C 36.536734,89.818368 35.083674,89.3 33.656122,88.695918 c -4.99898,-2.115306 -9.490816,-5.143878 -13.35,-9.00306 -3.859184,-3.859184 -6.887754,-8.351022 -9.00306,-13.35 C 9.1163263,61.171428 8.0071428,55.67347 8.0071428,50 c 0,-5.67347 1.1091835,-11.171428 3.2969392,-16.342858 2.115306,-4.998978 5.143878,-9.490816 9.00306,-13.35 3.859184,-3.859182 8.351022,-6.887754 13.35,-9.00306 C 38.828572,9.1163266 44.32653,8.0071428 50,8.0071428 c 5.67347,0 11.171428,1.1091838 16.342858,3.2969392 5,2.115306 9.490816,5.143878 13.35,9.00306 3.859182,3.859184 6.887754,8.351022 9.00306,13.35 2.186736,5.17245 3.295918,10.67041 3.295918,16.342858 0,5.672448 -1.109182,11.171428 -3.296938,16.342858 -2.115306,4.998978 -5.143878,9.490816 -9.00204,13.35 l 0,0 z"></path></svg></a></li>
</ul>
  
  
  
<ul class="subscribe">
  <li><a href="https://twitter.com/jpchou" rel="subscribe-twitter" title="@jpchou on Twitter" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 512 512"><path class="social" d="M0.001,334.932c33.327,30.816,118.891,59.981,188.517-8.271c-12.52,1.955-22.972-0.416-30.913-8.269
  c-7.531-7.465-7.945-15.182-3.914-22.202c3.275-5.725,10.184-9.741,16.977-13.934c-12.323,2.285-22.829,1.095-32.218-3.706
  c-12.604-6.444-24.863-13.228-28.3-27.207c7.71-8.112,16.28-15.359,34.831-12.627c-17.45-5.83-33.087-13.429-44.41-24.815
  c-11.028-11.091-12.163-18.302-13.932-26.996c9.632-3.567,19.688-5.421,30.478-4.353c-24.397-12.476-34.757-29.63-40.487-48.325
  c-1.731-5.652-2.044-11.03-1.31-16.545c98.826,37.305,145.11,64.109,170.662,89.251c11.496-30.589,38.3-99.868,78.371-123.646
  c0.191,3.77-1.309,7.837-4.357,12.189c11.863-6.609,21.125-17.188,37.445-16.98c-1.879,7.723-7.279,13.904-17.85,17.854
  c10.662-4.084,21.463-7.545,32.65-9.578c10.375-1.881,10.229,6.304,4.355,10.444c-11.916,8.412-24.578,9.456-37.006,13.498
  c38.105,0.949,69.266,18.994,93.604,58.343c8.088,13.074,13.52,26.149,14.807,40.487c16.254,4.563,32.426,5.494,48.76,2.61
  c4.475-0.796,8.645-1.63,12.627-3.482c-6.354,9.529-13.686,17.356-23.947,20.899c-9.811,3.387-19.637,6.688-30.473,6.968
  c17.641,6.675,37.082,7.045,57.033,5.659c-24.402,23.486-43.08,22.922-61.824,22.642c-8.221,34.703-25.025,69.315-60.52,101.005
  c-46.559,41.569-96.678,61.397-148.457,65.742c-48.552,4.07-95.488,3.512-146.726-20.464
  C56.486,393.349,24.648,368.884,0.001,334.932L0.001,334.932z"/></svg></a></li>
</ul>
  
  
<ul class="subscribe">
  <li><a href="https://linkedin.com/in/jpchou" rel="subscribe-linkedin" title="Julia Chou on LinkedIn" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 731 1000"><path class="social" d="M158.75 865l-156.25 0l0 -521.25l156.25 0l0 521.25zm393.75 -505q87.5 0 133.125 56.25t45.625 153.75l0 295l-156.25 0l0 -278.75q0 -108.75 -76.25 -108.75 -61.25 0 -80 61.25l0 326.25l-156.25 0q2.5 -468.75 0 -521.25l123.75 0l10 103.75l2.5 0q53.75 -87.5 153.75 -87.5zm-552.5 -146.25q0 -78.75 81.25 -78.75 80 0 80 78.75 0 77.5 -80 77.5 -81.25 0 -81.25 -77.5z"/></svg></a></li>
</ul>
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="jpchou.com" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2019/01/08/experiences-from-a-10-day-silent-meditation-retreat/">Experiences From a 10 Day Silent Meditation Retreat</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2019-01-08T18:58:07-08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2019</span></span> <span class='time'>6:58 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p><img class="center" src="/images/tomales_bay.jpg" width="800" title="Tomales Bay!" ></p>

<p>The latter half of 2018 saw me turn my attention towards focusing on personal development and self-improvement, and as part of these efforts, I began to explore ways to strengthen my emotional intelligence and self-awareness. I had been monitoring my physical fitness and nutrition for a few years, but I realized that I had neglected to pay corresponding attention to my mental and emotional health.</p>

<p>As I read more and more into these topics, I learned that a common pattern among many successful people is their practice of meditation, to which they give credit for drastically improving their quality of life and emotional stability.
I had always thought of meditation as something one practices for spiritual or religious reasons, and I have never particularly identified myself as either of these things. Perhaps I had also retained a Western unfamiliarity with the practice that made the concept seem foreign to me despite the fact that it&rsquo;s something people have been doing for thousands of years. I was intrigued, however, by the notion that if adopted regularly, meditating can improve one&rsquo;s focus, help create emotional balance, and remove distractions. Seemed pragmatic enough.</p>

<p>I learned about a 10 day Vipassana meditation retreat taught by a man named S.N. Goenka in a book called Never Eat Alone, in which the author spoke of his time there as a truly transformative and transcendent experience that changed his whole worldview. He now retreats for 10 days of silent meditation on a yearly basis.
I&rsquo;m a fairly introspective and contemplative person, so spending 10 days sitting around, not talking to anyone, and discovering new ways to become a better person sounded like something that would be completely in my wheelhouse. Seemed like there was much to potentially gain and little to lose.</p>

<p>I found the website for the Vipassana course and learned they offered a session at a location about an hour and a half outside of San Francisco (where I&rsquo;m currently based), so I went ahead and registered. The organization is run on a donation basis, providing courses for free to new students and only accepting contributions from those who have completed the full 10 days. They even helped coordinate a rideshare board, so I didn&rsquo;t have any financial or logistical concerns.</p>

<p>I was completely unsure of what to expect when I signed up for the course. Now, having completed it, I can say that I found the whole thing frustrating, meaningful, ridiculous, funny, and beneficial all at various times. Below are some observations I&rsquo;ve taken away from my time there.</p>

<hr />

<p><br/></p>

<p><b>DAY 0</b></p>

<p>Students were instructed to arrive the day before the first official day of meditation began for orientation. I discovered when I arrived that the course was being held in a rented space that doubled as a Catholic youth summer camp. The organizers did their best to create a neutral space by taping over signs and covering up any indication that this was anything but a place intended for quiet contemplation. I went through the female registration line and was assigned a top bunk in a 12-person cabin. I was also encouraged to turn in my cell phone for safekeeping during the course, but I opted to hold onto it and just keep it turned off in the bottom of my bag the whole time. Students weren&rsquo;t allowed even books to read or journals to write in.</p>

<p>I mingled with a few fellow students before we all began our silence. A good amount of people seemed to be from the Bay Area, though I met a few from states like Florida and New York. Some came with their partners or, in one case, with their family, which was interesting because the whole point of the retreat is to labor under a sense of isolation. A good number of people had already completed this course, but many, like myself, had little to no experience with meditation whatsoever and were just there to challenge themselves and learn what it was about. Most impressive of all to me was the fact that there was at least one (very) pregnant woman.</p>

<p>Overall, there were about 240 students in total, segregated by gender.</p>

<p>During orientation, the deep, croaking voice of S.N. Goenka (who passed away in 2013 but lives on through audio and video recordings in these courses) played through the speakers and instructed us to fully surrender yourself to the practice of Dhamma and Buddhism and to adopt several precepts throughout the next ten days. Five of the precepts forbade you from killing, stealing, lying, engaging in sexual misconduct, or taking any intoxicants. If you were a returning student, you had to adopt three additional precepts instructing you not to eat after noon, wear any sensory decorations such as jewelry, or sleep in high or luxurious beds.</p>

<p>The vows seemed to just be a formality, as we were all in an environment that made it extremely difficult to disobey most of the precepts. I wondered idly, though, whether or not the top bunk in my 12-person cabin could be considered &ldquo;high&rdquo; or &ldquo;luxurious.&rdquo;</p>

<p>Noble Silence officially began at 8:00 pm. I found the term a little grandiose, but effectively it meant the silence of body, speech, and mind, and no communication whatsoever, whether through speech, hand gestures, or eye contact, was permitted between the students. Students were only allowed to converse with teachers or assistants if they had any questions or concerns about the practice or the technique.</p>

<p><b>DAYS 1–2</b></p>

<p><img class="center" src="/images/meditation_timetable.png" width="500" title="Meditation Timetable" ></p>

<p>Each day started at around 4:00 am and ended at around 9:30 pm. Students spent the majority of the day meditating, with only a few hours set aside for eating and resting. At the end of each day, we would sit and watch a discourse video in which Goenka would explain meditation techniques, answer some frequently asked questions, and share little Zen koans. Then, he would introduce a new progression in our meditation technique to practice the following day.</p>

<p>We started out learning Anapana meditation, which is observing your respiration, paying attention to the way your breath rushing through your nostrils and across your upper lip.</p>

<p>One of my biggest frustrations already was being physically confined to a small space and instructed to not partake in any physical activity beyond simple stretching. At the same time, it was nice to be able to give free rein to my thoughts and my thoughts alone.</p>

<p>I&rsquo;m accustomed to living alone in a studio, so it was quite an adjustment for me to share a cabin with 11 other people. It was alarmingly easy to dehumanize people and think of them as nothing but mindless, thoughtless automatons when you can&rsquo;t look at them and you don&rsquo;t even know their names or the sound of their voices. I gave people nicknames based on the names of colleges or tech companies emblazoned on their sweats. When I couldn&rsquo;t empathize with them much at all, it became all the easier for their loud footsteps, snores, coughing, and sneezing to drive me insane.</p>

<p>During the meditation sessions, part of me thought it was a little morbid that we were all listening to recordings of a man who died years ago. But in a way, it&rsquo;s a beautiful thing that his legacy lives on through these courses and still impacts so many people.</p>

<p><b>DAY 3</b></p>

<p>My frustration and irritation grew as I began to berate myself for running off into the woods to sit around and think about myself as if I had no real problems to deal with or no better way to spend my time. I could have been lifting weights, taking online courses, or reading. Instead, I was trapped within the tiny confines of this children&rsquo;s summer camp without a book, a journal, or a phone.</p>

<p>I often found myself practicing the art of sleeping while sitting up rather than that of meditation.</p>

<p>It vaguely crossed my mind how odd it was that I was spending Christmas and New Year&rsquo;s with a large group of strangers in total silence. I wondered what was going on in the outside world, what kind of celebrations people were getting up to, what new political scandals had occurred, and how financial markets were performing. (Not well at all, for that last one).</p>

<p>I might have been crazy, but I thought I caught the occasional whiff of weed around the cabins and the dining hall, which was somehow both surprising and unsurprising.</p>

<p>There were moments of peace and serenity. The scenery was calm, the air was clear, the sun was bright, and the days were beautiful. At night, the stars were just gorgeous, shining with such clarity and brilliance that you would never witness in the city. </p>

<p>Outside of these moments of gratitude, I quickly started to look forward to getting back to my regular life. I started a nightly ritual of mentally incrementing how much progress I had made through the course.</p>

<p>10% done… 20% done… 30% done…</p>

<p><b>DAY 4</b></p>

<p>On the fourth day, we were introduced to the practice of Vipassana meditation. The purpose behind spending the first few days concentrating on your breath was to sharpen your ability to concentrate on the sensations in a small area of the body, and in Vipassana, you then extend that focus to other areas of the body, starting from the top of the head and traveling down to the toes. The purpose of this was to become aware of the sensations in your body, whether that be itching, aching, numbness, coldness, or the feeling of your heart pulsing. Then, you observe them as they are, divesting any sort of positive or negative interpretation of them. As you focus on them, you notice that these sensations are constantly shifting, which illustrates one of the takeaways of the whole meditation experience: everything (whether that be emotions, sensations, life situations) is fluid, impermanent, and in constant flux. If you can recognize that, you can allow yourself to be fully aware of the present moment but also prevent yourself from becoming too fixated on it because you know it&rsquo;s not going to last.</p>

<p>With this practice of self-observation, you come to realize that nothing is inherently good or bad. Your own biases and perceptions are the only things telling you that they are.</p>

<p>(Take my explanations of these concepts with a hefty pinch of salt, as I&rsquo;m sure this meditation boot camp, though intensive, has left many gaps in my understanding).</p>

<p>As much as the organizers insisted that theirs was a secular practice that didn&rsquo;t involve any rites or rituals, Goenka would end each session singing/chanting blessings for peace and goodwill, which did feel slightly ritualistic.</p>

<p><b>DAY 5</b></p>

<p>Some days, students were called up in groups to meet with their teachers, where the teachers would provide pointers and make sure you were practicing the technique properly.</p>

<p>At these times, I answered questions like &ldquo;Do you feel your equanimity growing stronger?&rdquo;</p>

<p>Why, yes, I suppose so.</p>

<p>To the best of my understanding, equanimity means having the ability to sit on a mat for hours on end, back aching, butt-sore, legs numb, and think &ldquo;Eh. This will pass.&rdquo;</p>

<p>It seems that forcing yourself to endure discomfort is a universal way to train your mind and strengthen your resilience to adversity.</p>

<p>I do wonder, though, whether maintaining the same posture for hours and cutting off circulation ever results in any health issues for long-time meditation practitioners.</p>

<p>The passage of time was excruciating and each day seemed interminable. My only source of entertainment was the constant stream of my own internal dialogue, and the inability to record any of my thoughts was the most painful part of the whole process.</p>

<p>It would have been much easier if I were allowed to acknowledge the existence of the hundreds of other people here. Though I don&rsquo;t miss conversing with people when I&rsquo;m actually alone, it was just absurd that we were a group of about 240 people walking around in contrived little bubbles of isolation bumping into each other in the meditation hall, waiting together in line at the dining hall, and going to sleep and waking up together. It would have been such an eerie scene for an unknowing person to stumble upon, this silent community in the woods. </p>

<p>Once, however, one of my cabin-mates asked me in a whisper whether or not I had a pair of shower shoes, and my heart nearly burst with happiness at this moment of human connection.</p>

<p><b>DAY 6</b></p>

<p>Little moments of joy prevailed. Even though the organizers and teachers did their best to maintain an air of solemnity in the meditation hall, and I had difficulty keeping my composure on many occasions. </p>

<p>People were nodding off all over the place. Once, the girl next to me fell asleep, slipped off her meditation bench, and nearly face-planted into the girl in front of her.</p>

<p>Furthermore, it turned out that however diligently Noble Silence was observed, the meditation hall was anything but silent. In fact, it was difficult not to become irritated by all the distracting sounds. One guy kept burping every ten minutes or so and managed to keep that up for days. Multiple people caught colds, so coughing and sneezing abounded. I had a most uncompassionate fear of being infected by someone around me.</p>

<p>The managers overseeing the women were strict about showing proper respect in the hall by not lying down, stretching excessively, or pointing your feet towards the teachers and would come to chastise you if they saw you doing any of the above. Meanwhile, I would occasionally glance over to the men&rsquo;s half of the hall to see some of them sprawled out and actually snoring on their meditation mats.</p>

<p>Once, I saw a man blowing a kiss towards the direction of the women&rsquo;s side of the meditation hall. He was wearing a wedding ring, so presumably, that was for his wife. </p>

<p>&ldquo;How sweet,&rdquo; I thought. &ldquo;But also, how dare he break the rules!&rdquo;</p>

<p>On another occasion, one of the men rushed out of the hall to the bathroom in order to throw up violently, and the whole hall of 240+ people pretended nothing was amiss and just carried on with their meditations.</p>

<p>We were warned that the practice of meditation may bring forth a lot of deep-rooted negative emotions, and this may ostensibly have been a physical manifestation of the eradication of the complexes nestled in the deepest levels of his consciousness. Alternatively, it is also possible that he just ate a bad piece of fruit.</p>

<p><b>DAY 7</b></p>

<p>Unfortunately, on this day I was forced to break my silence when I asked one of the managers if they had any tampons to spare.</p>

<p>I felt I had reached a tipping point. I was about three-quarters of the way through the course, and I tapped an inner reserve of patience and discipline. The cadence of each day was familiar to me now, and I felt I could calmly pass through the rest of my time here.</p>

<p>Watching Goenka speak in his discourse videos was like watching a kindly old grandpa reading you little parables and teaching you how to build character. At this point, I was really buying into his messages of compassion, peace, patience, tolerance, and forgiveness. I mean, who wouldn&rsquo;t? There is so much beauty in the human spirit, so much love in the soul! It was completely worth coming to this retreat in order to experience these uplifting moments of clarity and connection.</p>

<p><b>DAY 8</b></p>

<p>…Only a few more days left of this stupid shit.</p>

<p><b>DAY 9</b></p>

<p>The last few days weren&rsquo;t the smooth sailing I thought they would be. It seemed that the more fixated I was on my liberation, the slower time flowed. I looked forward to Goenka&rsquo;s discourses, as they were the only source of entertainment throughout the entire stay.</p>

<p>After one particular discourse, I sat deep in thought, pondering a parable regarding how one should maintain awareness of Nature&rsquo;s inherent impermanence and thinking of all the times in my life when I became overly attached to a set of circumstances only to become devastated when they were inevitably altered. However, my musings were abruptly interrupted when a girl sitting near me farted. </p>

<p>Are you kidding me with this? All right, now things couldn&rsquo;t change fast enough.</p>

<p>Despite the managers' attempts to maintain order and respect in the meditation hall, there were, sadly, very many farts. Noble Farts, no doubt.</p>

<p>The vegetarian menus they planned frequently featured beans very prominently. They definitely knew what they were doing.</p>

<p>Around this time, I also realized that I had gained the ability to tell how much time had passed during meditation hours based on the degree of numbness in my butt.</p>

<p><b>DAY 10</b></p>

<p>At around 10:00 am on this day, Noble Silence was broken, and students were allowed to engage in Noble Speech.</p>

<p>They arranged this in order to ease the transition back into regular society, but talking in the meditation hall and physical contact were still prohibited.</p>

<p>Goenka had one last lesson to impart before the course ended, and that was to practice sending metta to others around you after each meditation session. This was a way of sending good wishes, love, and happiness to others. After spending so much time in introspection and establishing your own sense of emotional balance, you were then to reflect that back upon those around you.</p>

<p>A huge amount of relief washed over me when I was finally able to witness that these people I had been living in silence with for the past week and a half are actually thinking, feeling, and sensing human beings who are really funny and very kind.</p>

<p>This speaks more to my own preconceived notions and biases, but I was wondering how many people were proponents of the healing powers of spiritual energy and mystical auras. In fact, I did overhear some mention of Reiki and crystals, but most of the people I talked to were not quite that free-thinking. </p>

<p>We discussed the practicalities of adopting the precepts into our ordinary lives (what constitutes sexual misconduct, anyway? Is it improper to have sexual desires? We eventually settled on a broad definition of misconduct as any action that isn&rsquo;t consensual). We learned each other&rsquo;s occupations as accountants, engineers, contractors, and project managers. We shared life stories, traded Instagram handles, speculated about the lives of our teachers outside of these meditation retreats, and joked about the little absurdities we all noticed during our time of silence.</p>

<p>As it turned out, the four teachers who taught this session were a pair of married couples. The two women were a school teacher and principal in the education system in the Bay Area. I was only slightly disappointed to learn that they weren&rsquo;t some higher beings who annually descended from their higher plane of existence in order to teach this course. I believe you&rsquo;re only approached by organizers to teach the course after you&rsquo;ve gone through several iterations both as a student and as a volunteer.</p>

<p>Time began to fly by once they allowed us to speak.</p>

<p><b>DAY 11</b></p>

<p>The organizers set up information booths in the dining hall so students could pick up literature on how to maintain this practice now that they&rsquo;d finished this course. The way they set up these displays with plastic tables and corrugated cardboard tri-fold boards reminded me of my elementary school science fairs.</p>

<p>I picked up a booklet about how to incorporate meditation into your life as a daily habit and a brochure titled &ldquo;The Art of Living: Vipassana Meditation.&rdquo;</p>

<p>In their closing notes, we were all encouraged to join the Vipassana Facebook group and volunteer to serve in future iterations of the course before finally being released to go our own ways.</p>

<hr />

<p><br/></p>

<p>Overall Takeaways</p>

<p>This was a positive experience and I&rsquo;m glad I did this; however, I wouldn&rsquo;t opt to repeat this particular course. I think dedicating 10+ hours a day to meditation is excessive and an inefficient use of my time. </p>

<p>That&rsquo;s not to say I don&rsquo;t believe the technique is incredibly beneficial, however. I do believe that making a daily habit of simply being calm for a little bit will do wonders for reducing stress and anxiety, and I have noticed an increase in my ability to focus on tasks a little more and to identify and eliminate distractions. I&rsquo;m not entirely sure if this is the result of being contained in an environment of total deprivation of any external stimuli for ten days, so I plan to continue meditating to see if this holds up. I suppose I&rsquo;m still waiting on time to tell if this whole experience will work much of a change in me.</p>

<p>Goenka recommended that students meditate two hours each day: one hour in the morning and one hour at night. However, I&rsquo;ll aim for thirty minutes a day for now.</p>

<p>Everybody gets a little something different out of going through even the same experiences, so I&rsquo;m not sure to whom I would recommend this course. You might emerge feeling like you&rsquo;ve just undergone some spiritual metamorphosis, as many have done, or you might come out thinking it&rsquo;s all utter bullshit. However, if any of this sounds intriguing to you in any way, you can check out their website for yourself and explore further.</p>

<p>As for me, I found my time here immersive and valuable, and I plan to continue reading up on Buddhism and other meditation practices on my own. I&rsquo;m looking forward to seeing where this path leads me.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/07/25/on-finding-solace-from-an-existential-crisis/">On Finding Solace From an Existential Crisis</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-07-25T21:31:05-07:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>9:31 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p></br></p>

<h3>The mass of men lead lives of quiet desperation</h3>




<h3>I wished to live deliberately, to front only the essential facts of life, and see if I could not learn what it had to teach, and not, when I came to die, discover that I had not lived</h3>




<h3>-- Henry David Thoreau</h3>


<p></br></p>

<p>These two of Thoreau&rsquo;s most famous quotes from Walden were the words that knocked me free from the clutches of an arrogant self-assuredness I hadn&rsquo;t known possessed me in my sophomore year of college. In its place, I felt the creeping numbness of a slow existential dread.
For most people, college is a time of self-exploration and self-discovery, a chance to test the limits of your own capacity and establish the foundations of your career. As for myself, I took to heart that very last goal to the exclusion of all others. I was going to graduate with a degree in Computer Science, snag a lucrative job in Silicon Valley, work for a few decades, save up money, and finally retire to an idyllic life squirreled away in a cabin in the woods where I would write the rest of my days away.</p>

<p>I was struggling at the time, pouring a lot of my energy into balancing three jobs alongside the study of a subject that did not come intuitively to me, to say the least.
During my sophomore year, I decided to take a literature course with an amazing professor who introduced me to the works of Thoreau, resulting in a dramatic shift in my perspective. Suddenly, everything I was doing seemed like an endless and meaningless toil. I realized that this future I was so single-mindedly pursuing was only a vague specter and I had no idea if it was going to be what I wanted when I got it. What were the things that were going to be important to me when I woke up some 40 years down the road? When it came time for me to die, was I going to discover that I had never truly lived?</p>

<p>It wasn&rsquo;t so much that choosing a career path based primarily on the money-making potential is inherently wrong, it was the realization that I had made that commitment without much deliberation or forethought whatsoever as to what else in my life I wanted to achieve and what I would be sacrificing in order to pursue this. I knew that my natural affinity gravitated towards literature and the art of language and story more so than hard science and engineering, but I was afraid that the opportunity cost of investing any of my time and energy towards nurturing those interests would be my chance to break into the realm of software engineering and a life free from financial destitution.</p>

<p>This crisis of identity fed into a larger, more general crisis of existentialism itself. After all, how could I decide what meaning I wanted to add to the world if I didn&rsquo;t even have a proper understanding of myself and my own values and beliefs?</p>

<p>At the time, I sought to find some answers in Albert Camus' work exploring a concept he referred to as &ldquo;absurdity,&rdquo; that is, the act of trying to seek meaning in a meaningless world. Camus' spin on the subject is that any attempt to shape the chaos of the world into some form of sense is futile, and he presents the Greek mythological character Sisyphus as the ideal characterization of the struggle with absurdity. Sisyphus is a man who is doomed in the afterlife to an eternal cycle of pushing a boulder to the top of a mountain only to have it roll back down again, and Camus uses his labor to exemplify the toils of mankind at large. It is only on Sisyphus' journey back down the mountain that he has full agency. He accepts the inevitable futility of his efforts and decides to embrace it regardless, and in that moment, he has complete mastery of his fate.</p>

<p>Reading through these concepts helped put my mind at ease just a little. I imagined that all I had to do was accept that anything I did in life was eventually meaningless, so I might as well drive my initial agenda forward. I pushed aside my thoughts in order to focus on making my engineering career a priority. The next few years witnessed me graduating with my Computer Science degree, moving to San Francisco, and finding work as a software engineer at a tech startup. On the surface, it appeared that I was well on track to achieve my initial dreams and aspirations, but a vague, uncomfortable feeling of malaise persisted through my everyday life.</p>

<p>As it goes, a recent loss of a very important connection to me, along with its associated hopes, dreams, and expectations, unearthed all these underlying insecurities and sent me reeling deeper into an identity crisis than I have ever been. It&rsquo;s inevitable that one experiences several major losses throughout their lifetime, but the worst ones are the ones that completely blindside you and leave you with a lingering sense of incompletion, of missed opportunity. You become helplessly mired in thoughts of how you could have done things differently, done more, or just been better.</p>

<p>Everything around me suddenly seemed to take on a new sense of gravity, and I found myself questioning and reevaluating every single aspect of my life. Does every relationship, every material possession, every belief, every value, every motivation, and every goal I have truly embody who I am, what matters to me, and what kind of life I really want to lead?</p>

<p>I was completely swept away in a maelstrom of despair, self-inadequacy, and doubt, and almost overnight, my emotional well-being completed a beautiful and transcendent metamorphosis into a flaming pile of garbage. There has always been a slight disconnect between how I feel and what I think, such as when I feel irritated by having to sit in heavy traffic even though I know there&rsquo;s nothing I can do about it. Never before have I felt such a gaping chasm between the two, however, and the small, hyper-rational part of me could only shrink away in awe and incredulity to observe the mad stampede of emotions rampaging through me. I&rsquo;ve usually been the sort of person for whom rationality and logic ought to prevail in all decision-making, but I suppose for matters of the heart, reason can only follow. I could only use this as an opportunity for some serious self-examination, to try to embrace my emotions and assess and harness them to drive my own behavior.</p>

<p>It just so happened that a former college roommate of mine scheduled a visit during this time, providing me some refuge in the old comforts of a familiar friendship. She&rsquo;s an amazing, well-grounded, thoughtful, and hilarious person, and seeing her again reminded me of a lot of wonderful qualities inherent in her that I respect and aspire to attain myself. We wandered all over the city, wove in and out of tattoo parlors and dive bars, and took a road trip up to Tahoe, all the while having fun and being ridiculous at a time when having fun and being ridiculous have been the absolute last things on my mind.</p>

<p>She&rsquo;s the sort of person with whom I can talk about anything and everything, and every conversation with her is a chance to learn something new. Our conversations freewheeled from immigration reform and border-control policies, having children (always a topic of discussion among women, it seems), the morality of suicide, and what it means to be happy to what we think our own deepest flaws are. The ideas that we discuss and bounce off one another never hit a wall where one person simply refuses to change their point of view. Rather, the only barrier we hit is when one of us realizes that she knows too little about the subject for the conversation to be productive any longer.</p>

<p>As much as this has been a time for me to reflect on how I need to work on myself and the next steps I need to take in order to grow and improve, this recent visit my friend paid me also opened my eyes to just how amazing the interconnection of human relationships can be.
As I reconsider all of my initial anxieties in college about finding purpose, I realize that the works of Thoreau and Camus that affected me so profoundly emphasized only a solitary search for meaning, making no mention of what reassurance an individual might find in the associations with those around her. I&rsquo;m now starting to properly appreciate how many wonderful, kind, and generous people there are around me. I treasure the friendships that I have very highly, and I&rsquo;m making it my mission to live a life where those I call my friends can say that I had a positive impact on them.</p>

<p>This has been a textbook exercise in psychosocial development for me, in which I have been trying to reconcile my own sense of self within the context of my surrounding social environment. Through it all, I think I&rsquo;ve finally managed to consolidate what carries meaning for me from all of the experiences that I&rsquo;ve had so far. What&rsquo;s important to me is continual self-improvement, measured in part by how I foster and cultivate my relationships with those around me. I want to always be exploring more, learning more, and becoming a better person, and I want to find the people in my life that make me a priority and focus on them as well.
To that end, I&rsquo;m setting tentative, longer-term goals for myself and taking the smaller, more immediate steps necessary in order to reach them. For instance, I imagine that somewhere along the path of my software engineering career, I&rsquo;ll be confronted with the choice of becoming either a manager or a more senior individual contributor. Regardless, I&rsquo;ll need to work on my leadership skills, so for now, I&rsquo;m setting immediate goals to improve my speaking, writing, empathy, self-awareness, and overall communications skills.</p>

<p>I am still being constantly surprised by the seemingly limitless bounds of my own arrogance and naiveté. I also know that I&rsquo;ll never reach a state where I am completely secure about all the decisions I&rsquo;ve made and the life I lead. However, instead of being dragged down by the weight of my own doubts and insecurities, I&rsquo;m learning to find peace in the acknowledgement of the perpetuity of my imperfection. Clearly pinpointing all of my flaws will allow me to confront them and work through them, laying out the path I need to follow and allowing me to incorporate an element of deliberation in the everyday choices I make.</p>

<p>I know there is still a great deal of uncertainty in my future. The steps I&rsquo;m taking today will likely lead me to places that look wildly different from where I expected to be in 10, 20, and 30 years. However, I believe true importance lies not in what the larger narrative of my life ultimately looks like but in being mindful and finding the joy in the instances of human connection in each of the small moments that comprises it. If I die tomorrow, I&rsquo;ll be at peace believing I made something of the time that I had here.</p>

<p>Though I rather suspect that some thread of existential agony will weave permanently throughout my state of being, this most recent struggle has helped me to uncover which ideals truly matter to me at this moment, and I have found much solace in that.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/06/24/sidekiq-ifying-emails-at-reflektive/">Sidekiq-ifying Emails at Reflektive</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-06-24T11:01:11-07:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>11:01 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>At Reflektive, we offer the option of sending reminder emails after kicking off performance review cycles in order to notify participants of that cycle that they should fill out their reviews. We used <a href='https://github.com/collectiveidea/delayed_job' target='blank'>Delayed::Job</a>, an asynchronous priority queue system pioneered by the Shopify engineering team, to handle the delivery of those emails.</p>

<p>However, we noticed that there was a huge bottleneck when it came to delivering emails to cycles with large numbers of participants. For instance, one company that had approximately 30,000 employees would clog up our worker queues for hours, preventing other companies from sending out their own emails while this large job was still being processed.</p>

<p>One solution might have been to just throw more hardware at it, to spin up more DJ workers to hammer through the job queues. However, we decided to explore the option of using <a href='https://github.com/mperham/sidekiq' target='blank'>Sidekiq</a> as an alternative asynchronous job processing system.</p>

<p>Some of the factors leading to choosing Sidekiq included the fact that Sidekiq has higher concurrency than Delayed::Job because it leverages threads as opposed to single processes.</p>

<p>In addition, Delayed::Job stores its queued jobs in a database table (in our case, Postgres) while they&rsquo;re waiting for a DJ worker to process it. We opted to pair Sidekiq with Redis, an in-memory datastore. This results in a much lower I/O cost because the threads processing Sidekiq jobs don&rsquo;t have to make database queries every time they fetch a new job.</p>

<p>Below are some of Sidekiq&rsquo;s performance statistics (obtained from their Github page)</p>

<p><img class="center" src="/images/sidekiq_performance.png"></p>

<p><br/></p>

<h3>Converting a Delayed::Job to Sidekiq</h3>


<p>The process for converting a Delayed::Job worker to Sidekiq was fairly straightforward. The general structure of our DJ email worker code looked something like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class DelayedJobEmail
</span><span class='line'>  attr_reader :employee
</span><span class='line'>
</span><span class='line'>  def initialize(employee)
</span><span class='line'>    @employee = employee
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def perform
</span><span class='line'>    schedule_email(employee)
</span><span class='line'>  end
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># Enqueueing this email job:
</span><span class='line'>job = DelayedJobEmail.new(Employee.find(123))
</span><span class='line'>Delayed::Job.enqueue(job)</span></code></pre></td></tr></table></div></figure>


<p>The equivalent Sidekiq implementation of that email worker would look like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class SidekiqEmail
</span><span class='line'>  include Sidekiq::Worker
</span><span class='line'>  sidekiq_options queue: :process_email
</span><span class='line'>
</span><span class='line'>  def perform(employee_id) # Note that Sidekiq does not accept Employee objects
</span><span class='line'>    employee = Employee.find(employee_id)
</span><span class='line'>    schedule_email(employee)
</span><span class='line'>  end
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'># Enqueueing this email job:
</span><span class='line'>SidekiqEmail.perform_async(123)</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s worth noting that Sidekiq will perform a JSON dump and load of arguments passed into its workers, so it only accepts pure JSON data types. This increases the consistency of data for edge cases where data has changed from underneath in the time that a job has spent enqueued and waiting for a worker to process it, but it will increase the total number of database calls made.</p>

<p><br/></p>

<h3>Testing Sidekiq Jobs</h3>


<p>Of course, for every piece of code, we have to write corresponding tests. Below are various methods of testing Sidekiq jobs in Minitest. They are all different ways of testing the same thing.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>require 'sidekiq/testing'
</span><span class='line'>
</span><span class='line'>class SidekiqEmailTest
</span><span class='line'>  def setup
</span><span class='line'>    Sidekiq::Testing.fake! # Should be fake by default
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def teardown
</span><span class='line'>    Sidekiq::Worker.clear_all # Ensure jobs don't linger between tests
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  test '#perform delivers an email (Sidekiq fake mode)' do
</span><span class='line'>    SidekiqEmail.perform_async(123)
</span><span class='line'>    assert_equal(1, SidekiqEmail.jobs.size)
</span><span class='line'>    SidekiqEmailWorker.drain
</span><span class='line'>    # Assert that email was sent properly
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  test '#perform delivers an email (Sidekiq inline mode)' do
</span><span class='line'>    Sidekiq::Testing.inline! do
</span><span class='line'>      SidekiqEmail.perform_async(123)
</span><span class='line'>      # Assert that email was sent properly
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  test '#perform delivers an email (direct testing)' do
</span><span class='line'>    SidekiqEmail.new.perform(123)
</span><span class='line'>    # Assert that email was sent properly
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p><br/></p>

<h3>Configuring Sidekiq Workers</h3>


<p>Now that we have set up enqueueing Sidekiq jobs, it is a simple matter to spin up a process to start working on those jobs.
The Sidekiq rake command allows you to configure the concurrency, weight, and queues for each process as follows:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bundle exec sidekiq -c 20 -q process_email,2 -q deliver_email,1</span></code></pre></td></tr></table></div></figure>


<p>The <code>-c</code> flag controls the concurrency of the worker, in this case, 20. The <code>-q</code> commands specify which queues this worker will be pulling jobs from, and the <code>,2</code> and <code>,1</code> after the queue names indicate the weighted priority given to these queues. In this case, jobs from the <code>process_email</code> queue will be processed twice as frequently as those from the <code>deliver_email</code> queue.</p>

<p><br/></p>

<h3>Monitoring Queues</h3>


<p>We use NewRelic to monitor our application&rsquo;s performance, and we wanted to be able to leverage NewRelic to provide further transparency and statistics for our new Sidekiq queues as well. To this end, we set up a Heroku dyno to continually publish our Sidekiq queue sizes as custom events to our NewRelic instance. This way, we can see whether or not a queue is backed up, investigate the causes of any bottlenecks that we observe, and determine whether or not we should allocate more workers to process jobs.</p>

<p>The code we used to publish custom NewRelic events looked something like as follows:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>module QueueSizeMonitor
</span><span class='line'>  def self.publish_queue_information
</span><span class='line'>    Sidekiq::Queue.all.each do |queue|
</span><span class='line'>      publish(queue.name, queue.size)
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    publish('scheduled', ::Sidekiq::ScheduledSet.new.size)
</span><span class='line'>    publish('retries', ::Sidekiq::RetrySet.new.size)
</span><span class='line'>    publish('dead', ::Sidekiq::DeadSet.new.size)
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  def self.publish(queue_name, queue_size)
</span><span class='line'>    ::NewRelic::Agent.record_custom_event('QueueSizeMonitor', name: queue_name, size: queue_size)
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>And afterwards, we were able to query those custom events in NewRelic and compile a chart to visualize how our Sidekiq queue sizes vary over time.</p>

<p><img class="center" src="/images/sidekiq_queue_size_newrelic.png" width="600"></p>

<p><br/></p>

<h3>Results and Next Steps</h3>


<p>After some monitoring, we discovered that switching from Delayed::Job to Sidekiq resulted in about a 4.5x improvement in throughput! We were able to complete a 30,000 employee email campaign in under an hour. We did hit some snags where we discovered that the concurrency we had set for our Sidekiq workers was a little too high and was resulting in a lot of open database connections at once, and we ended up scaling that down.</p>

<p>Moving forward, we are pushing to convert more Delayed::Job work over to Sidekiq.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/12/rot13-in-ruby/">Rot13 in Ruby</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-12T23:38:03-07:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:38 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just for fun, I decided to try my hand at implementing a Rot13 program, which is a simple problem which takes
a string as its input and encodes it by moving each letter 13 characters forward or backward.
For example, since there are 26 letters in the alphabet, we can assign indices to each letter starting at <code>0</code> for <code>'a'</code>
and ending at <code>25</code> for <code>'z'</code>. The Rot13 program would switch (or rotate) the character <code>'a'</code> with <code>'n'</code> since it has the index <code>13</code>.</p>

<p>Giving this program the string input <code>'apple'</code> would (hopefully) return <code>'nccyr'</code>.</p>

<p>To that end, the following is the first pass I made at implementing the program:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Translator
</span><span class='line'>  ALPHABET = 'abcdefghijklmnopqrstuvwxyz'
</span><span class='line'>
</span><span class='line'>  def translate(string)
</span><span class='line'>    result = ''
</span><span class='line'>    string.split(//).each do |char|
</span><span class='line'>      if char == ' ' #preserve spaces if string has multiple words
</span><span class='line'>        result &lt;&lt; char
</span><span class='line'>        next
</span><span class='line'>      end
</span><span class='line'>      result &lt;&lt; translate_char(char)
</span><span class='line'>    end
</span><span class='line'>    result
</span><span class='line'>  end
</span><span class='line'>
</span><span class='line'>  private
</span><span class='line'>
</span><span class='line'>  def translate_char(char)
</span><span class='line'>    lowercase = char.downcase
</span><span class='line'>    is_uppercase = char != lowercase
</span><span class='line'>    index = ALPHABET.index lowercase
</span><span class='line'>    translated_index = index - 13
</span><span class='line'>    if translated_index &lt; 0
</span><span class='line'>      translated_index += 26
</span><span class='line'>    end
</span><span class='line'>
</span><span class='line'>    #preserve case in original string
</span><span class='line'>    if is_uppercase
</span><span class='line'>      ALPHABET[translated_index].upcase
</span><span class='line'>    else
</span><span class='line'>      ALPHABET[translated_index]
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure>


<p>In this solution, I created a class <code>Translator</code> that defines constant <code>ALPHABET</code> string representing the alphabet and
an instance method <code>#translate</code> that takes in a string, splits it into an array of its characters, translates each character
using a private method <code>#translate_char</code>, and then returns a string composed of those translated characters.</p>

<p>The private <code>#translate_char</code> method checks the capitalization of the character, checks the index of the character against
the <code>ALPHABET</code> constant, and then rotates that character by returning the appropriate character in <code>ALPHABET</code> at that given index minus 13.</p>

<p>All in all, this got the job done.</p>

<p>However, I later discovered Ruby&rsquo;s <code>String#tr</code> method, which allows you to replace characters in a string. It is similar to
the <code>#gsub</code> method, but while <code>#gsub</code> can match complex patterns with complex results, <code>#tr</code> can only replace fixed characters.</p>

<p>In any case, you can call <code>'hello'.tr('el', 'ip')</code> to get the result <code>hippo</code> since it will replace every <code>'e'</code> with <code>'i'</code>
and every <code>'l'</code> with <code>'p'</code>.</p>

<p>It turns out that the above implementation can be greatly simplified by the following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class Translator
</span><span class='line'>  def translate(string)
</span><span class='line'>    string.tr('a-zA-Z', 'n-za-mN-ZA-M')
</span><span class='line'>  end
</span><span class='line'>end</span></code></pre></td></tr></table></div></figure>


<p>Spaces and punctuation are preserved since it only checks the string for those characters and replaces
them accordingly, ignoring all else. I also realized at this point that my original solution would not have accounted for punctuation
or special characters and would have stripped them out in the result.</p>

<p>Using the <code>String#tr</code> method, I was able to simplify my ~30 line class down to 5 lines in a more idiomatic (and more effective!)
Ruby solution.</p>

<p>Pretty cool.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Julia Chou -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
